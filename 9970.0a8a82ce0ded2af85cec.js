(self.webpackChunkagilmente_cp=self.webpackChunkagilmente_cp||[]).push([[9970],{9970:(t,i,e)=>{"use strict";e.r(i),e.d(i,{PatientsPageModule:()=>A});var n=e(5860),r=e(5633),o=e(4762),a=e(8619),s=e(5450),c=e(6611),l=e(1116);const p=function(){return["../new-patient"]};function g(t,i){1&t&&(a.TgZ(0,"ion-card",5),a.TgZ(1,"ion-text"),a.TgZ(2,"h2"),a._uU(3,"No se encontr\xf3 ning\xfan paciente. \xbfQuieres cargar uno?"),a.qZA(),a.qZA(),a.TgZ(4,"ion-button",6),a._UZ(5,"ion-icon",7),a.TgZ(6,"p",8),a._uU(7,"Crear paciente"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("routerLink",a.DdM(1,p)))}const d=function(t){return["../edit-patient",t]},h=function(t){return["./",t]};function u(t,i){if(1&t&&(a.TgZ(0,"ion-card"),a.TgZ(1,"ion-card-header"),a.TgZ(2,"ion-row"),a.TgZ(3,"ion-col",15),a.TgZ(4,"div"),a.TgZ(5,"ion-avatar",16),a._UZ(6,"img",17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-col",18),a.TgZ(8,"h4"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"ion-col",19),a.TgZ(11,"ion-button",20),a._UZ(12,"ion-icon",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"ion-card-content"),a.TgZ(14,"ion-label"),a._uU(15),a._UZ(16,"br"),a._UZ(17,"br"),a.qZA(),a.TgZ(18,"ion-label"),a._uU(19),a.qZA(),a._UZ(20,"br"),a._UZ(21,"br"),a.TgZ(22,"ion-button",22),a._UZ(23,"ion-icon",23),a.TgZ(24,"ion-label",24),a._uU(25,"Ver m\xe1s"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=i.$implicit;a.xp6(9),a.AsE("",t.firstName," ",t.lastName,""),a.xp6(2),a.Q6J("routerLink",a.VKq(6,d,t.id)),a.xp6(4),a.hij(" Edad: ",t.age," "),a.xp6(4),a.hij(" ",t.description," "),a.xp6(3),a.Q6J("routerLink",a.VKq(8,h,t.id))}}function Z(t,i){1&t&&(a.TgZ(0,"h2"),a._uU(1,"No se han encontrado resultados para la b\xfasqueda"),a.qZA())}function f(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",9),a.TgZ(2,"ion-button",6),a._UZ(3,"ion-icon",7),a.TgZ(4,"p",8),a._uU(5,"Nuevo Paciente"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"ion-item",10),a.TgZ(7,"ion-label",11),a._uU(8,"Busqueda por paciente"),a.qZA(),a.TgZ(9,"ion-searchbar",12),a.NdJ("ionInput",function(i){return a.CHM(t),a.oxw().filterPatientCard(i)}),a.qZA(),a.qZA(),a.TgZ(10,"div",13),a.YNc(11,u,26,10,"ion-card",14),a.qZA(),a.YNc(12,Z,2,0,"h2",4),a.qZA()}if(2&t){const t=a.oxw();a.xp6(2),a.Q6J("routerLink",a.DdM(3,p)),a.xp6(9),a.Q6J("ngForOf",t.formattedPatients),a.xp6(1),a.Q6J("ngIf",0==t.formattedPatients.length)}}const m=[{path:"",component:(()=>{class t{constructor(t){this.patientsApiService=t,this.scrollDepthTriggered=!1,this.pageNumber=0,this.formattedPatients=[],this.patients=[]}ngOnInit(){}ionViewDidEnter(){this.pageNumber=0,this.formattedPatients=[],this.getPatients(),this.patients=this.formattedPatients}calculateAge(t,i,e){const n=new Date;let r=n.getFullYear()-e,o=n.getMonth()+1-i;return n.getDate()-t<0&&o--,o<0&&r--,r}getPatientsFiltered(t){this.formattedPatients=[],this.pageNumber=0,""==t&&this.getPatients(),this.patientsApiService.getFilteredPatients(t).subscribe(t=>{t.content.forEach(t=>{const i=t.bornDate.split("-"),e=this.calculateAge(i[0],i[1],i[2]);let n=t.description;n&&(n=t.description.substring(0,45),45==n.length&&(n+="...")),this.auxPatient={id:t.id,firstName:t.firstName,lastName:t.lastName,description:n,age:e,city:t.city},this.formattedPatients.push(this.auxPatient)})})}getPatients(){this.patientsApiService.getActivePatients(this.pageNumber).subscribe(t=>{t.content.forEach(t=>{const i=t.bornDate.split("-"),e=this.calculateAge(i[0],i[1],i[2]);let n=t.description;n&&(n=t.description.substring(0,45),45==n.length&&(n+="...")),this.auxPatient={id:t.id,firstName:t.firstName,lastName:t.lastName,description:n,age:e,city:t.city},this.formattedPatients.push(this.auxPatient)})}),this.scrollDepthTriggered=!1}filterPatientCard(t){let i=t.srcElement.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.getPatientsFiltered(i)}logScrolling(t){return(0,o.mG)(this,void 0,void 0,function*(){if(this.scrollDepthTriggered)return;if("ion-content"!=t.target.localName)return;const i=yield t.target.getScrollElement();t.detail.scrollTop>(i.scrollHeight-i.clientHeight)/100*80&&this.formattedPatients.length%20==0&&this.formattedPatients.length==20*(this.pageNumber+1)&&(this.scrollDepthTriggered=!0,this.pageNumber++,this.getPatients())})}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(s.M))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patients"]],decls:11,vars:3,consts:[["color","primary"],[3,"scrollEvents","ionScroll"],["size","1"],["class","ion-padding",4,"ngIf"],[4,"ngIf"],[1,"ion-padding"],[3,"routerLink"],["name","person-add-outline"],[1,"ion-margin"],[1,"horizontal-cards","ion-padding","ion-margin"],["id","rounded"],["position","stacked","color","primary"],["animated","","showCancelButton","focus","placeholder","Nombre o apellido",3,"ionInput"],[1,"horizontal-cards","ion-margin"],[4,"ngFor","ngForOf"],["size","3"],["slot","start",2,"max-width","fit-content"],["src","https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y"],["size","7"],["size","2"],["color","light",2,"--border-radius","20px",3,"routerLink"],["name","pencil-outline","item-right",""],["color","light","fill","clear",2,"float","right",3,"routerLink"],["name","add-outline","color","primary"],["color","primary",1,"ion-margin"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar",0),a.TgZ(2,"ion-title"),a._uU(3,"Mis Pacientes"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"ion-content",1),a.NdJ("ionScroll",function(t){return i.logScrolling(t)}),a.TgZ(5,"ion-row"),a._UZ(6,"ion-col",2),a.TgZ(7,"ion-col"),a.YNc(8,g,8,2,"ion-card",3),a.YNc(9,f,13,4,"div",4),a.qZA(),a._UZ(10,"ion-col",2),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("scrollEvents",!0),a.xp6(4),a.Q6J("ngIf",0===i.patients.length),a.xp6(1),a.Q6J("ngIf",0!==i.patients.length))},directives:[c.Gu,c.sr,c.wd,c.W2,c.Nd,c.wI,l.O5,c.PM,c.yW,c.YG,n.rH,c.YI,c.gu,c.Ie,c.Q$,c.VI,c.j9,l.sg,c.Zi,c.BJ,c.FN],styles:["ion-toolbar.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start:8px;--padding-end:8px;--padding-top:20px;--padding-bottom:20px}.horizontal-cards[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{display:inline-block;width:360px;height:256px}"]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.Bz.forChild(m),r.t]]}),t})()},5450:(t,i,e)=>{"use strict";e.d(i,{M:()=>a});var n=e(529),r=e(8619),o=e(2693);let a=(()=>{class t{constructor(t){this.http=t,this.entity="patient"}getPatients(t){return this.http.get(`http://${n.N.ip}:8080/${this.entity}?page=${t}`)}getActivePatients(t){return this.http.get(`http://${n.N.ip}:8080/${this.entity}/activePatients?page=${t}`)}getActivePatientsListed(){return this.http.get(`http://${n.N.ip}:8080/${this.entity}/listed`)}getPatientsListed(){return this.http.get(`http://${n.N.ip}:8080/${this.entity}/listedAll`)}getFilteredPatients(t){return this.http.get(`http://${n.N.ip}:8080/${this.entity}/fn/${t}`)}getPatientById(t){return this.http.get(`http://${n.N.ip}:8080/${this.entity}/${t}`)}postPatient(t){return this.http.post(`http://${n.N.ip}:8080/${this.entity}`,t)}putPatient(t,i){return this.http.put(`http://${n.N.ip}:8080/${this.entity}/${i}`,t)}deletePatient(t){return this.http.put(`http://${n.N.ip}:8080/${this.entity}/deletePatient/${t}`,{})}}return t.\u0275fac=function(i){return new(i||t)(r.LFG(o.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);