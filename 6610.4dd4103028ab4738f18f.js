(self.webpackChunkagilmente_cp=self.webpackChunkagilmente_cp||[]).push([[6610],{6610:(e,t,i)=>{"use strict";i.r(t),i.d(t,{NewPatientPageModule:()=>f});var o=i(1116),n=i(1462),r=i(6611),a=i(5860),l=i(4762),s=i(5527),c=i(8619),d=i(5450);function m(e,t){1&e&&(c.TgZ(0,"div",22),c._uU(1," Este campo es requerido "),c.qZA())}function u(e,t){1&e&&(c.TgZ(0,"div",22),c._uU(1," Este campo es requerido "),c.qZA())}function p(e,t){1&e&&(c.TgZ(0,"div",22),c._uU(1," Este campo es requerido "),c.qZA())}function g(e,t){1&e&&(c.TgZ(0,"div",22),c._uU(1," Este campo es requerido "),c.qZA())}const Z=[{path:"",component:(()=>{class e{constructor(e,t,i,o){this.patientsApiService=e,this.modalCtrl=t,this.alertController=i,this.router=o,this.datePickerObj={};const n=new Date;this.minDate=new Date(1900,0,1),this.maxDate=new Date(n.getFullYear()-10,n.getMonth(),n.getDate())}invalidField(e){return this.myForm.get(e).invalid&&this.myForm.get(e).touched}ngOnInit(){this.myForm=new n.cw({firstName:new n.NI("",n.kI.required),lastName:new n.NI("",n.kI.required),birthDate:new n.NI("",n.kI.required),telephone:new n.NI,email:new n.NI("",n.kI.email),description:new n.NI,city:new n.NI("",n.kI.required)}),this.datePickerObj={showTodayButton:!1,closeOnSelect:!0,setLabel:"Ok",closeLabel:"Cerrar",titleLabel:"Selecciona una fecha",dateFormat:"DD-MM-YYYY",clearButton:!1,monthsList:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weeksList:["D","L","M","X","J","V","S"],fromDate:this.minDate,toDate:this.maxDate,inputDate:this.maxDate}}openDatePicker(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:s.Fd,cssClass:"li-ionic4-datePicker",componentProps:{objConfig:this.datePickerObj}});yield e.present()})}save(e){if(e.valid){let t=this.createLoginCode();this.patientsApiService.postPatient({firstName:e.value.firstName,lastName:e.value.lastName,bornDate:e.value.birthDate,city:e.value.city,telephone:e.value.telephone,email:e.value.email,description:e.value.description,loginCode:t,isLogged:!1}).subscribe(e=>{this.presentAlert("\xa1Paciente creado!","<p>El paciente ha sido registrado correctamente. \nMu\xe9strale este c\xf3digo a tu paciente para que pueda ingresar a la app. \n</p><h3>"+t+"</h3>",!0,"alertSuccess")},e=>{this.presentAlert("Error","Un error ha ocurrido, por favor int\xe9ntelo de nuevo m\xe1s tarde.",!1,"alertError")})}}createLoginCode(){let e=Math.floor(1e6*Math.random()).toString();for(;e.length<6;)e="0"+e;return e}presentAlert(e,t,i,o){return(0,l.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({message:t,header:"Cargar Paciente",subHeader:e,cssClass:"centerh3",buttons:[{text:"OK",cssClass:o}]});yield n.present(),(yield n.onDidDismiss())&&i&&this.router.navigateByUrl("/patients")})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.M),c.Y36(r.IN),c.Y36(r.Br),c.Y36(a.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-new-patient"]],decls:65,vars:7,consts:[["color","primary"],["slot","start"],["text",""],["size","2"],[1,"ion-padding","ion-margin"],["id","container",1,"ion-padding","ion-margin"],[3,"formGroup","ngSubmit"],["size","6"],["id","rounded"],["position","stacked","fixed","","color","primary"],["formControlName","firstName","type","text","maxlength","20"],["class","validation-error","style","color:#f53d3d; font-size:80%","class","alert",4,"ngIf"],["position","stacked","color","primary"],["formControlName","lastName","type","text","maxlength","20"],["id","rounded","button",""],["readonly","","formControlName","birthDate",3,"liIonic4Datepicker"],["name","calendar-outline","slot","end",2,"margin-top","16px"],["formControlName","city","type","text"],["type","text","formControlName","telephone"],["formControlName","email","type","email"],["rows","6","formControlName","description","type","text","maxlength","240"],["type","submit","expand","block",1,"ion-text-uppercase","ion-margin-top",3,"disabled"],[1,"alert",2,"color","#f53d3d","font-size","80%"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"Agilmente - Cargar nuevo paciente"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"ion-row"),c._UZ(8,"ion-col",3),c.TgZ(9,"ion-col"),c.TgZ(10,"ion-title",4),c._uU(11," Nuevo Paciente "),c.qZA(),c.TgZ(12,"div",5),c.TgZ(13,"form",6),c.NdJ("ngSubmit",function(){return t.save(t.myForm)}),c.TgZ(14,"ion-row"),c.TgZ(15,"ion-col",7),c.TgZ(16,"ion-item",8),c.TgZ(17,"ion-label",9),c._uU(18,"Nombre *"),c.qZA(),c._UZ(19,"ion-input",10),c.qZA(),c.YNc(20,m,2,0,"div",11),c.qZA(),c.TgZ(21,"ion-col",7),c.TgZ(22,"ion-item",8),c.TgZ(23,"ion-label",12),c._uU(24,"Apellido *"),c.qZA(),c._UZ(25,"ion-input",13),c.qZA(),c.YNc(26,u,2,0,"div",11),c.qZA(),c.qZA(),c.TgZ(27,"ion-row"),c.TgZ(28,"ion-col",7),c.TgZ(29,"ion-item",14),c.TgZ(30,"ion-label",12),c._uU(31,"Fecha de nacimiento *"),c.qZA(),c._UZ(32,"ion-input",15),c._UZ(33,"ion-icon",16),c.qZA(),c.YNc(34,p,2,0,"div",11),c.qZA(),c.TgZ(35,"ion-col"),c.TgZ(36,"ion-item",8),c.TgZ(37,"ion-label",12),c._uU(38," Localidad * "),c.qZA(),c._UZ(39,"ion-input",17),c.qZA(),c.YNc(40,g,2,0,"div",11),c.qZA(),c.qZA(),c.TgZ(41,"ion-row"),c.TgZ(42,"ion-col",7),c.TgZ(43,"ion-item",14),c.TgZ(44,"ion-label",12),c._uU(45,"Tel\xe9fono"),c.qZA(),c._UZ(46,"ion-input",18),c.qZA(),c.qZA(),c.TgZ(47,"ion-col"),c.TgZ(48,"ion-item",8),c.TgZ(49,"ion-label",12),c._uU(50,"Correo Electr\xf3nico"),c.qZA(),c._UZ(51,"ion-input",19),c.qZA(),c.qZA(),c.qZA(),c.TgZ(52,"ion-row"),c.TgZ(53,"ion-col"),c.TgZ(54,"ion-item",8),c.TgZ(55,"ion-label",12),c._uU(56," Descripci\xf3n "),c.qZA(),c._UZ(57,"ion-textarea",20),c.qZA(),c.qZA(),c.qZA(),c.TgZ(58,"ion-label",4),c._uU(59," * Los campos que poseen (*) son obligatorios. "),c.qZA(),c._UZ(60,"br"),c._UZ(61,"br"),c.TgZ(62,"ion-button",21),c._uU(63," Cargar Paciente "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(64,"ion-col",3),c.qZA(),c.qZA()),2&e&&(c.xp6(13),c.Q6J("formGroup",t.myForm),c.xp6(7),c.Q6J("ngIf",t.invalidField("firstName")),c.xp6(6),c.Q6J("ngIf",t.invalidField("lastName")),c.xp6(6),c.Q6J("liIonic4Datepicker",t.datePickerObj),c.xp6(2),c.Q6J("ngIf",t.invalidField("birthDate")),c.xp6(6),c.Q6J("ngIf",t.invalidField("city")),c.xp6(22),c.Q6J("disabled",!t.myForm.valid))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.Nd,r.wI,n._Y,n.JL,n.sg,r.Ie,r.Q$,r.pK,r.j9,n.JJ,n.u,n.nD,o.O5,s.w5,r.gu,r.g2,r.YG],styles:["#rounded[_ngcontent-%COMP%]{border-radius:10px!important;font-size:.9em;border:1px solid silver!important;display:flex;justify-content:space-between}#container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.li-ionic4-datePicker[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:200px;max-height:100%;width:200px}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.Bz.forChild(Z)],a.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,n.UX,n.u5,s.YZ,r.Pc,h]]}),e})()}}]);